<!DOCTYPE html>
<html>
	<head>
		<title>Who Chose the Critters' Color?</title>
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<link href='https://fonts.googleapis.com/css?family=Catamaran:400,800' rel='stylesheet' type='text/css'>
		<script type="text/javascript" src="js/lib/pcg-random.js"></script>
		<script type="text/javascript" src="js/lib/chroma.js"></script>
		<script type="text/javascript" src="js/lib/createjs-2015.05.21.min.js"></script>
		<script type="text/javascript" src="js/lib/QuadTree.js"></script>
		<script type="text/javascript" src="js/lib/gl-matrix.js"></script>
		<script type="text/javascript" src="js/lib/poisson-disk.js"></script>
		<script type="text/javascript" src="js/lib/closest.js"></script>

		<script type="text/javascript" src="js/Environment.js"></script>
		<script type="text/javascript" src="js/Plant.js"></script>
		<script type="text/javascript" src="js/Agent.js"></script>
		<script type="text/javascript" src="js/Predator.js"></script>
		<script type="text/javascript" src="js/Info.js"></script>
		<script type="text/javascript" src="js/World.js"></script>
		<script type="text/javascript" src="js/index.js"></script>
		<style>
			* { -webkit-tap-highlight-color:rgba(0,0,0,0); }
			* {
				font-family: Catamaran, sans-serif;
			}
			h1 {
				font-size: 48px;
				text-align: center;
			}
			h3 {
				font-size: 24px;
				text-align: center;
			}
			.c-text {
				text-align: center;
			}
			.caption {
				font-size: 36px;
			}
			.notopmargin {
				margin-top: 0;
			}
			.nobottommargin {
				margin-bottom: 0;
			}
			a:link {
				color: #000099;
			}
			a:visited {
				color: #000099;
			}
			a:hover {
				color: #0000EE;
			}
			p {
				font-size: 24px;
			}
			ol {
				margin: 0 0 1.5em;
				padding: 0;
				counter-reset: item;
			}
			ol > li {
				margin: 0;
				padding: 0 0 0 2em;
				text-indent: -2em;
				list-style-type: none;
				counter-increment: item;
				font-size: 24px;
			}

			ol > li:before {
				display: inline-block;
				width: 1em;
				padding-right: 0.5em;
				font-weight: bold;
				text-align: right;
				content: counter(item) ".";
			}
			ul {
				font-size: 24px;
			}
			ol > li * {
				text-indent: 0;
			}
			section {
				width: 600px;
				margin-top: 20px;
				margin-bottom: 20px;
			}
			block {
				width: 100%;
				overflow: auto;
				display: block;
				padding-top: 20px;
				padding-bottom: 40px;
			}
			.widest {
				width: 1100px;
			}
			.ten-across {
				width: 92px;
			}
			.three-across {
				width: 365px;
			}
			.three-across-text {
				width: 330px;
			}
			.height-160 {
				height: 160px;
				display: table-cell;
			}
			.bottom-text {
				vertical-align: middle;
			}
			.top-text {
				vertical-align: middle;
			}
			.centered {
				padding-left: 0;
				padding-right: 0;
				margin-left: auto;
				margin-right: auto;
				display: block;
			}
			.left {
				float: left;
			}
			.right {
				float: right
			}
			.vspace {
				margin-top: 50px;
				margin-bottom: 50px;
			}
			.signature {
				color: #888888;
			}
			canvas {
			}
		</style>
	</head>
	<body>
		<div style="height:200px; display:none" class="widest centered vspace">
			<canvas class="centered" id="confetti-top"></canvas>
		</div>
		<h1 class="notopmargin nobottommargin">Who Chose the Critters' Color?</h1>
		<p class="notopmargin c-text">A playable post on the relationship between life and its environment.</p>
		<block>
		<section class="centered vspace">
			<h3 class="nobottommargin">This is a story about critters.</h3>
			<p class="notopmargin">
				Critters are cute, colorful, and friendly!
				They have short lives compared to you and me,
				which they spend wandering around. Here's a critter that's
				<b><span id="single-critter-color">color</span></b>.
			</p>
		</section>
		<div class="centered">
			<canvas class="centered" id=single-critter></canvas>
		</div>
		</block>
		<block>
		<section class="centered vspace">
			<h3 class="nobottommargin">A critter gets its color from its parents.</h3>
			<p class="notopmargin">
				After two critters bump together, one of them will give
				birth to a baby critter. This 
				<b><span id="critter-family-father">color</span></b>
				critter and this
				<b><span id="critter-family-mother">color</span></b>
				critter will have a
				<b><span id="critter-family-child">color</span></b>
				child.
			</p>
		</section>
		<div class="centered">
			<canvas class="centered" id=critter-family></canvas>
		</div>
		</block>
		<block>
		<section class="centered vspace">
			<h3 class="nobottommargin">Sometimes baby critters have a surprising color.</h3>
			<p class="notopmargin">
				These critters are both
				<b><span id="critter-m-family-father">color</span></b>,
				but their child might not be. What color is it?
			</p>
		</section>
		<div class="centered">
			<canvas class="centered" id=critter-m-family></canvas>
		</div>
		</block>
		<block>
		<section id="decade" class="centered vspace">
			<h3 class="nobottommargin">In the wild, a predator hunts critters.</h3>
			<p class="notopmargin">
				Critters are cute, but they are also tasty! Out in the wild, this
				beastie hunts critters to feed itself and its own children.
			</p>
		</section>
		<div class="centered">
			<canvas class="centered" id='predator'></canvas>
		</div>
		<section class="centered vspace">
			<p>
				It comes out at night, when the critters are sleeping...
			</p>
		</section>
		<div style="height:600px" class="centered vspace">
			<canvas class="centered" id=selection></canvas>
		</div>
		<div class="centered vspace">
			<p class="c-text caption">
				<span id="selection-hunt-progress"></span>
			</p>
		</div>
		</block>
    <section id="post-hunt-progress-blocker" class="centered vspace signature">
      <p class="notopmargin c-text">
        There's more to this story, but you have to finish hunting first.
      </p>
    </section>
		<div id="hidden-until-selection-game" style="display:none">
		<block>
			<div style="height:100px" class="widest centered vspace">
				<div style="width:180px" class="left">
					<p class="c-text notopmargin">
					On day<br>
					Most critters were
					</p>
				</div>
				<div class="ten-across left" style="display:none">
					<p class="c-text notopmargin">
						<b>1</b><br>
						<b><span id="critter-decade-1">???</span></b>
					</p>
				</div>
				<div class="ten-across left" style="display:none">
					<p class="c-text notopmargin">
						<b>2</b><br>
						<b><span id="critter-decade-2">???</span></b>
					</p>
				</div>
				<div class="ten-across left" style="display:none">
					<p class="c-text notopmargin">
						<b>3</b><br>
						<b><span id="critter-decade-3">???</span></b>
					</p>
				</div>
				<div class="ten-across left" style="display:none">
					<p class="c-text notopmargin">
						<b>4</b><br>
						<b><span id="critter-decade-4">???</span></b>
					</p>
				</div>
				<div class="ten-across left" style="display:none">
					<p class="c-text notopmargin">
						<b>5</b><br>
						<b><span id="critter-decade-5">???</span></b>
					</p>
				</div>
				<div class="ten-across left" style="display:none">
					<p class="c-text notopmargin">
						<b>6</b><br>
						<b><span id="critter-decade-6">???</span></b>
					</p>
				</div>
				<div class="ten-across left" style="display:none">
					<p class="c-text notopmargin">
						<b>7</b><br>
						<b><span id="critter-decade-7">???</span></b>
					</p>
				</div>
				<div class="ten-across left" style="display:none">
					<p class="c-text notopmargin">
						<b>8</b><br>
						<b><span id="critter-decade-8">???</span></b>
					</p>
				</div>
				<div class="ten-across left" style="display:none">
					<p class="c-text notopmargin">
						<b>9</b><br>
						<b><span id="critter-decade-9">???</span></b>
					</p>
				</div>
				<div class="ten-across left" style="display:none">
					<p class="c-text notopmargin">
						<b>10</b><br>
						<b><span id="critter-decade-10">???</span></b>
					</p>
				</div>
			</div>
			</block>
			<block>
			<section class="centered vspace">
				<h3 class="nobottommargin">
					The critters changed color to match the environment.
				</h3>
				<p class="notopmargin">
					The critters changed color!
					They started out
					<b><span id="critter-decade-start-critter">???</span></b>,
					and now they are
					<b><span id="critter-decade-end-critter">???</span></b>.
					That's a bigger change than we saw before, without hunting.
				</p>
				<p>
					Strangely, these
					<b><span id="critter-decade-end-critter">???</span></b>
					critters are almost the same color as the
					<b><span id="critter-decade-env">???</span></b>
					environment. Did you notice that they got harder to
					hunt every year?
				</p>
			</section>
			<div style="height: 431px" class="widest centered vspace">
				<div style="width:524px; height:381px" class="left">
					<p class="c-text caption notopmargin nobottommargin">Day <b>1</b></p>
					<canvas id="selection-before"></canvas>
				</div>
				<div style="width:524px; height:381px;" class="right">
					<p class="c-text caption notopmargin nobottommargin">
					Day <b><span id="last-year">???</span></b>
					</p>
					<canvas id="selection-after"></canvas>
				</div>
			</div>
			</block>
			<block>
			<section class="centered vspace">
				<h3 class="nobottommargin">
					How did the critters change color?
				</h3>
				<p class="notopmargin">
					While you were watching and hunting them, three things
					were happening.
				</p>
			</section>
			<div style="height:1060px" class="widest centered vspace">
				<div class="left three-across">
					<p class="c-text caption three-across notopmargin nobottommargin">
						<b>Mutation</b>
					</p>
					<p class="c-text centered three-across-text notopmargin">
						Some of the
						<b><span id="critter-decade-start-critter">???</span></b>
						critters' children were surprisingly
						<b><span id="critter-decade-further-m-critter">???</span></b>
						or
						<b><span id="critter-decade-closer-m-critter">???</span></b>.
					</p>
					<canvas class="centered" id="triptych-mutation"></canvas>
				</div>
				<div class="left three-across">
					<p class="c-text caption three-across notopmargin nobottommargin">
						<b>Elimination</b>
					</p>
					<p class="c-text centered three-across-text notopmargin">
						The <b><span id="critter-decade-env">???</span></b>
						environment made
						<b><span id="critter-decade-closer-m-critter">???</span></b>
						critters hard to see, so you hunted
						<b><span id="critter-decade-start-critter">???</span></b>
						and
						<b><span id="critter-decade-further-m-critter">???</span></b>
						critters.
					</p>
					<canvas class="centered" id="triptych-selection"></canvas>
				</div>
				<div class="left three-across">
					<p class="c-text caption three-across notopmargin nobottommargin">
						<b>Inheritance</b>
					</p>
					<p class="c-text centered three-across-text notopmargin">
						The
						<b><span id="critter-decade-closer-m-critter">???</span></b>
						critters that you didn't hunt passed that
						<b><span id="critter-decade-closer-m-critter">???</span></b>
						color to their children. 
					</p>
					<canvas class="centered" id="triptych-inheritance"></canvas>
				</div>
			</div>
			
			<section class="centered vspace">
				<p>
				This is called natural selection.
				It's a process that causes slow changes to
				living things.
				</p>
			</section>
			</block>
			<block>
			<section class="centered vspace">
				<h3 class="nobottommargin">
					Will natural selection do this every time?
				</h3>
				<p class="notopmargin">
					Yes! No matter what color the environment is, or what
					color the critters start out with, they will become
					the same color as the environment if you hunt them.
					<a href="javascript:
										window.scroll(0, document.querySelector('#decade').offsetTop-10);
										window.location.reload();">See for yourself by starting again with
										different colors.</a>
				</p>
			</section>
			</block>
			<div style="height:200px" class="widest centered vspace">
				<canvas class="centered" id="confetti-bottom"></canvas>
			</div>
			<section class="centered vspace signature">
				<h3>
					Thank you for reading this post!
				</h3>
				<p>
					I'm <a href="http://rupertdeese.com/">Rupert Deese</a>.
					I wrote this post while working at <a href="http://www.cdglabs.org/">CDG Labs</a>
					in 2015.
				</p>
				<p>
					The "playable" format was inspired by Bret Victor's
					<a href="http://worrydream.com/ExplorableExplanations/">Explorable
						Explanations</a>, and Vi Hart and Nicky Case's
					<a href="http://ncase.me/polygons/">Parable of the Polygons</a>.
				</p>
			</section>
		</div>
	</body>
</html>
